# OpenClaw Diagnostics Report — 2026-02-18 (UTC)

Generated: 2026-02-18

Summary
-------
- Gateway and channels are running locally (loopback-only) on 127.0.0.1:18789.
- Channels observed: Telegram (@Benji_Franklin_bot) reported OK; WhatsApp provider(s) linked (auth age 0m). Web gateway heartbeats are present.
- No fatal errors in the last 24h log tail. Notable events: multiple config overwrites (openclaw.json) and several SIGTERM/restart cycles.
- Cron subsystem has no jobs configured.

Collected artifacts
-------------------
Saved to workspace/diagnostics:
- openclaw_logs_tail.txt (tails of /tmp/openclaw/openclaw-2026-02-18.log)
- top_snapshot.txt (top - first 20 lines)
- free.txt (free -h)
- df.txt (df -h)
- dmesg_tail.txt (dmesg tail — unavailable due to permission)
- journal_openclaw_24h.txt (journalctl -u openclaw for last 24h — command attempted)

Findings
--------
1) Channel connectivity and auth
- Telegram: logged as "ok" in the logs (latency ~2563ms). Good.
- WhatsApp: provider started and "linked". Auth age entries show regular heartbeats.
- Web gateway: heartbeats recorded repeatedly with increasing uptimeMs; connectionId changes observed on restarts.

2) Service lifecycle / restarts
- Several log lines show SIGTERM received and gateway shutting down, followed by gateway restart on the same port. Examples at 04:24:16 and 04:39:37 UTC. These indicate either an orchestrator/service manager restarting the process or manual restarts.
- Config file ~/.openclaw/openclaw.json overwritten multiple times (WARN entries). This triggered reload actions (gateway/reload) which are logged.
- Frequent config overwrites and reloads may cause brief downtime and auth-age counters to reset.

3) Resource & runtime
- top/free/df snapshots were captured (see files). dmesg read failed due to permission when run as this user; recommend running with elevated permissions if kernel logs are needed.
- No CPU/memory spikes visible in the captured top snapshot (first 20 lines) — review full output for longer-term trends.

4) Cron jobs / automation
- Cron subsystem started but reports 0 jobs. The requested daily job to collect and push jobcards is not present.

5) Security/Networking
- Gateway binds to loopback only (127.0.0.1:18789). This is secure for local-only access but not reachable remotely. If remote access is required, change bind settings and secure with firewall/SSH tunnel.

Recommendations (actionable)
----------------------------
High-priority
- Identify why SIGTERM events are occurring. Check systemd user service (~/.config/systemd/user/openclaw-gateway.service) and any orchestrator (cron, external scripts, or supervisor) that may send SIGTERM. If these are unintended, stop the restarter.
- Stop frequent config auto-overwrites. Track what process or automation updates ~/.openclaw/openclaw.json (timestamped backup files exist). Ensure changes are deliberate.

Medium-priority
- Add a cron job to collect daily jobcards and push to your GitHub repo (script included below). Configure it when repo info is available.
- If you need remote access to the dashboard, set up a secure reverse proxy or SSH tunnel instead of binding to 0.0.0.0 without protections.
- Enable file rotation/retention for /tmp/openclaw logs to avoid disk growth (logrotate or built-in retention).

Low-priority
- Optional: enable richer health checks (external process verifying channel auth and message send/receive). Current health-monitor interval = 300s.
- Consider enabling persistent journaling or centralized logging (ELK/CloudWatch) for longer retention and easier search.

Script: collect daily jobcards and push to GitHub
------------------------------------------------
Save as: ~/.openclaw/cron/push_jobcards.sh (executable). Replace placeholders for GITHUB_REPO and GITHUB_TOKEN.

#!/usr/bin/env bash
set -euo pipefail

# Configuration - set these before use
GITHUB_REPO="REPLACE_WITH_OWNER/REPO"  # e.g. myorg/openclaw-jobcards
GITHUB_TOKEN="REPLACE_WITH_TOKEN"
WORKDIR="/home/ubuntu/.openclaw/jobcards"
TMP_REPO="/tmp/openclaw_jobcards_repo"

mkdir -p "$WORKDIR"
rm -rf "$TMP_REPO"
mkdir -p "$TMP_REPO"

# Collect jobcards (example: gather last-day diagnostics and logs)
DATE=$(date +%F)
OUTFILE="$WORKDIR/jobcard-$DATE.md"

cat > "$OUTFILE" <<EOF
# Jobcard - $DATE
Generated: $(date --utc)

## System snapshot


echo "Top snapshot:\n" >> "$OUTFILE"
top -b -n1 | head -n 40 >> "$OUTFILE"

echo "\nFree:\n" >> "$OUTFILE"
free -h >> "$OUTFILE"

echo "\nDisk usage:\n" >> "$OUTFILE"
df -h >> "$OUTFILE"

echo "\nOpenClaw recent logs:\n" >> "$OUTFILE"
tail -n 500 /tmp/openclaw/openclaw-$(date +%F).log >> "$OUTFILE" || true
EOF

# Commit and push to GitHub
cd "$TMP_REPO"
if [ -d .git ]; then
  git pull --rebase origin main || true
else
  git init
  git remote add origin "https://x-access-token:${GITHUB_TOKEN}@github.com/${GITHUB_REPO}.git"
  git fetch origin main || true
  git checkout -b main || true
fi

cp "$OUTFILE" .
 git add jobcard-*.md
 git commit -m "Add jobcard $DATE" || true
 git push origin main || true

# Cleanup
rm -rf "$TMP_REPO"

Notes: set GITHUB_REPO and GITHUB_TOKEN, ensure token has repo:contents permissions. Test manually before scheduling.

(cron line to run at 23:59 Bangkok time = 23:59 Asia/Bangkok):
# Edit crontab with: EDITOR="nano" crontab -e
59 23 * * * /bin/bash /home/ubuntu/.openclaw/cron/push_jobcards.sh >> /home/ubuntu/.openclaw/cron/push_jobcards.log 2>&1

(If the system uses system timezone != Asia/Bangkok, use anacron/systemd timer or use TZ in the crontab: TZ=Asia/Bangkok)

Best-practice references
------------------------
- OpenClaw docs troubleshooting: https://docs.openclaw.ai/troubleshooting
- Systemd user services: https://www.freedesktop.org/wiki/Software/systemd/User/
- Secure local-only services via SSH tunnel: https://www.ssh.com/academy/ssh/tunneling
- GitHub Actions / tokens best-practices: https://docs.github.com/en/actions/security-guides/automatic-token-authentication
- Log rotation recommendations (logrotate): https://linux.die.net/man/8/logrotate

Next steps I can take (if requested)
-----------------------------------
- Inspect ~/.openclaw/openclaw.json history/backups to identify what changed and when.
- Check systemd user service logs (journalctl --user -u openclaw-gateway.service) to see who issued SIGTERM.
- Install and configure the push_jobcards.sh script and create the cron job (requires GitHub repo info / token).


